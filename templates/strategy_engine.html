<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Lakshmi AI Pro - Advanced Indian Market Intelligence</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chartjs-adapter-date-fns/dist/chartjs-adapter-date-fns.bundle.min.js"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800;900&family=JetBrains+Mono:wght@400;500;600;700&display=swap');
        
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Inter', sans-serif;
            background: 
                radial-gradient(circle at 20% 80%, rgba(120, 119, 198, 0.3) 0%, transparent 50%),
                radial-gradient(circle at 80% 20%, rgba(255, 119, 198, 0.3) 0%, transparent 50%),
                radial-gradient(circle at 40% 40%, rgba(120, 219, 255, 0.3) 0%, transparent 50%),
                linear-gradient(135deg, #0c0c0c 0%, #1a1a2e 25%, #16213e 50%, #1a1a2e 75%, #0c0c0c 100%);
            min-height: 100vh;
            overflow-x: hidden;
            color: white;
        }
        
        .neural-bg {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            z-index: 1;
            opacity: 0.6;
        }
        
        .neural-node {
            position: absolute;
            width: 4px;
            height: 4px;
            background: rgba(0, 255, 255, 0.8);
            border-radius: 50%;
            animation: neural-pulse 3s ease-in-out infinite;
        }
        
        .neural-connection {
            position: absolute;
            height: 1px;
            background: linear-gradient(90deg, transparent, rgba(0, 255, 255, 0.4), transparent);
            animation: data-flow 2s linear infinite;
        }
        
        @keyframes neural-pulse {
            0%, 100% { 
                transform: scale(1);
                box-shadow: 0 0 10px rgba(0, 255, 255, 0.8);
            }
            50% { 
                transform: scale(1.5);
                box-shadow: 0 0 20px rgba(0, 255, 255, 1);
            }
        }
        
        @keyframes data-flow {
            0% { opacity: 0; transform: translateX(-100px); }
            50% { opacity: 1; }
            100% { opacity: 0; transform: translateX(100px); }
        }
        
        .main-container {
            position: relative;
            z-index: 10;
            min-height: 100vh;
            padding: 20px;
        }
        
        .header {
            text-align: center;
            margin-bottom: 40px;
            position: relative;
        }
        
        .logo-container {
            position: relative;
            display: inline-block;
            margin-bottom: 20px;
        }
        
        .logo {
            font-size: 120px;
            animation: divine-rotation 8s linear infinite;
            filter: drop-shadow(0 0 60px rgba(255, 215, 0, 0.8));
            position: relative;
            z-index: 2;
        }
        
        .logo-aura {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            width: 200px;
            height: 200px;
            background: radial-gradient(circle, rgba(255, 215, 0, 0.3) 0%, rgba(255, 0, 255, 0.2) 50%, transparent 100%);
            border-radius: 50%;
            animation: aura-pulse 4s ease-in-out infinite;
            z-index: 1;
        }
        
        @keyframes divine-rotation {
            0% { transform: rotate(0deg) scale(1); }
            25% { transform: rotate(90deg) scale(1.1); }
            50% { transform: rotate(180deg) scale(1); }
            75% { transform: rotate(270deg) scale(1.1); }
            100% { transform: rotate(360deg) scale(1); }
        }
        
        @keyframes aura-pulse {
            0%, 100% { transform: translate(-50%, -50%) scale(1); opacity: 0.6; }
            50% { transform: translate(-50%, -50%) scale(1.3); opacity: 1; }
        }
        
        .title {
            font-size: 56px;
            font-weight: 900;
            background: linear-gradient(135deg, #FFD700 0%, #FF6B6B 25%, #4ECDC4 50%, #45B7D1 75%, #96CEB4 100%);
            background-size: 400% 400%;
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            animation: rainbow-flow 4s ease-in-out infinite;
            margin-bottom: 15px;
            letter-spacing: -3px;
            text-shadow: 0 0 30px rgba(255, 215, 0, 0.5);
        }
        
        @keyframes rainbow-flow {
            0%, 100% { background-position: 0% 50%; }
            50% { background-position: 100% 50%; }
        }
        
        .subtitle {
            color: rgba(255, 255, 255, 0.9);
            font-size: 20px;
            font-weight: 600;
            margin-bottom: 10px;
        }
        
        .tagline {
            color: rgba(255, 255, 255, 0.7);
            font-size: 16px;
            font-weight: 500;
            margin-bottom: 40px;
        }
        
        .dashboard-grid {
            display: grid;
            grid-template-columns: 1fr 2fr 1fr;
            gap: 24px;
            margin-bottom: 32px;
        }
        
        .control-panel {
            background: 
                linear-gradient(135deg, rgba(255, 255, 255, 0.15) 0%, rgba(255, 255, 255, 0.05) 100%),
                radial-gradient(circle at 30% 30%, rgba(0, 255, 255, 0.1) 0%, transparent 50%);
            backdrop-filter: blur(25px) saturate(200%);
            border: 1px solid rgba(255, 255, 255, 0.3);
            border-radius: 24px;
            padding: 32px;
            box-shadow: 
                0 32px 64px rgba(0, 0, 0, 0.4),
                inset 0 1px 0 rgba(255, 255, 255, 0.2);
            position: relative;
            overflow: hidden;
        }
        
        .control-panel::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 1px;
            background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.5), transparent);
        }
        
        .panel-title {
            font-size: 24px;
            font-weight: 800;
            color: #FFD700;
            margin-bottom: 24px;
            text-align: center;
            text-shadow: 0 0 20px rgba(255, 215, 0, 0.5);
        }
        
        .input-group {
            display: flex;
            flex-direction: column;
            gap: 20px;
            margin-bottom: 24px;
        }
        
        .input-field {
            position: relative;
        }
        
        .input-label {
            display: block;
            color: rgba(255, 255, 255, 0.9);
            font-weight: 700;
            margin-bottom: 8px;
            font-size: 14px;
            text-transform: uppercase;
            letter-spacing: 1px;
        }
        
        .form-input, .form-select {
            width: 100%;
            padding: 16px 20px;
            background: rgba(255, 255, 255, 0.1);
            border: 2px solid rgba(255, 255, 255, 0.2);
            border-radius: 16px;
            color: white;
            font-size: 16px;
            font-weight: 600;
            outline: none;
            transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
            font-family: 'JetBrains Mono', monospace;
        }
        
        .form-input:focus, .form-select:focus {
            background: rgba(255, 255, 255, 0.15);
            border-color: rgba(0, 255, 255, 0.8);
            box-shadow: 
                0 0 30px rgba(0, 255, 255, 0.4),
                inset 0 1px 0 rgba(255, 255, 255, 0.2);
            transform: translateY(-2px);
        }
        
        .form-select {
            cursor: pointer;
            appearance: none;
            background-image: url("data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' fill='none' viewBox='0 0 20 20'%3e%3cpath stroke='%23ffffff' stroke-linecap='round' stroke-linejoin='round' stroke-width='1.5' d='m6 8 4 4 4-4'/%3e%3c/svg%3e");
            background-position: right 12px center;
            background-repeat: no-repeat;
            background-size: 16px;
        }
        
        .form-select option {
            background: #1a1a2e;
            color: white;
            padding: 10px;
        }
        
        .action-buttons {
            display: flex;
            flex-direction: column;
            gap: 16px;
        }
        
        .action-btn {
            width: 100%;
            padding: 20px 24px;
            border: none;
            border-radius: 20px;
            font-size: 16px;
            font-weight: 800;
            cursor: pointer;
            transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
            position: relative;
            overflow: hidden;
            text-transform: uppercase;
            letter-spacing: 1.5px;
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.3);
        }
        
        .action-btn::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.2), transparent);
            transition: left 0.5s;
        }
        
        .action-btn:hover::before {
            left: 100%;
        }
        
        .primary-btn {
            background: linear-gradient(135deg, #FF6B6B 0%, #4ECDC4 50%, #45B7D1 100%);
            color: white;
            box-shadow: 0 20px 40px rgba(255, 107, 107, 0.4);
        }
        
        .primary-btn:hover {
            transform: translateY(-4px);
            box-shadow: 0 30px 60px rgba(255, 107, 107, 0.6);
        }
        
        .secondary-btn {
            background: linear-gradient(135deg, #FFD700 0%, #FF8C00 50%, #FF6347 100%);
            color: white;
            box-shadow: 0 20px 40px rgba(255, 215, 0, 0.4);
        }
        
        .secondary-btn:hover {
            transform: translateY(-4px);
            box-shadow: 0 30px 60px rgba(255, 215, 0, 0.6);
        }
        
        .tertiary-btn {
            background: linear-gradient(135deg, #9B59B6 0%, #8E44AD 50%, #663399 100%);
            color: white;
            box-shadow: 0 20px 40px rgba(155, 89, 182, 0.4);
        }
        
        .tertiary-btn:hover {
            transform: translateY(-4px);
            box-shadow: 0 30px 60px rgba(155, 89, 182, 0.6);
        }
        
        .action-btn:disabled {
            opacity: 0.6;
            cursor: not-allowed;
            transform: none;
        }
        
        .main-display {
            background: 
                linear-gradient(135deg, rgba(255, 255, 255, 0.1) 0%, rgba(255, 255, 255, 0.05) 100%),
                radial-gradient(circle at 50% 50%, rgba(0, 255, 255, 0.1) 0%, transparent 50%);
            backdrop-filter: blur(25px);
            border: 1px solid rgba(255, 255, 255, 0.3);
            border-radius: 24px;
            padding: 32px;
            box-shadow: 0 32px 64px rgba(0, 0, 0, 0.3);
            position: relative;
            overflow: hidden;
        }
        
        .main-display::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 1px;
            background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.5), transparent);
        }
        
        .chart-container {
            background: rgba(0, 0, 0, 0.3);
            border-radius: 20px;
            padding: 24px;
            height: 500px;
            position: relative;
            border: 1px solid rgba(255, 255, 255, 0.1);
            box-shadow: inset 0 2px 10px rgba(0, 0, 0, 0.3);
        }
        
        .metrics-panel {
            background: 
                linear-gradient(135deg, rgba(255, 255, 255, 0.1) 0%, rgba(255, 255, 255, 0.05) 100%),
                radial-gradient(circle at 70% 30%, rgba(255, 0, 255, 0.1) 0%, transparent 50%);
            backdrop-filter: blur(25px);
            border: 1px solid rgba(255, 255, 255, 0.3);
            border-radius: 24px;
            padding: 32px;
            box-shadow: 0 32px 64px rgba(0, 0, 0, 0.3);
            position: relative;
            overflow: hidden;
        }
        
        .metrics-panel::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 1px;
            background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.5), transparent);
        }
        
        .metrics-grid {
            display: grid;
            grid-template-columns: 1fr;
            gap: 20px;
        }
        
        .metric-card {
            background: rgba(255, 255, 255, 0.08);
            border: 1px solid rgba(255, 255, 255, 0.2);
            border-radius: 16px;
            padding: 20px;
            text-align: center;
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
        }
        
        .metric-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.1), transparent);
            transition: left 0.5s;
        }
        
        .metric-card:hover::before {
            left: 100%;
        }
        
        .metric-card:hover {
            transform: translateY(-4px);
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.3);
            border-color: rgba(0, 255, 255, 0.5);
        }
        
        .metric-value {
            font-size: 28px;
            font-weight: 900;
            color: #FFD700;
            font-family: 'JetBrains Mono', monospace;
            text-shadow: 0 0 20px rgba(255, 215, 0, 0.5);
            margin-bottom: 8px;
        }
        
        .metric-label {
            font-size: 14px;
            color: rgba(255, 255, 255, 0.8);
            font-weight: 600;
            text-transform: uppercase;
            letter-spacing: 1px;
        }
        
        .analysis-section {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(400px, 1fr));
            gap: 24px;
            margin-top: 32px;
        }
        
        .analysis-card {
            background: 
                linear-gradient(135deg, rgba(255, 255, 255, 0.1) 0%, rgba(255, 255, 255, 0.05) 100%),
                radial-gradient(circle at 20% 80%, rgba(0, 255, 255, 0.1) 0%, transparent 50%);
            backdrop-filter: blur(25px);
            border: 1px solid rgba(255, 255, 255, 0.3);
            border-radius: 24px;
            padding: 32px;
            box-shadow: 0 32px 64px rgba(0, 0, 0, 0.3);
            position: relative;
            overflow: hidden;
        }
        
        .analysis-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 1px;
            background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.5), transparent);
        }
        
        .card-header {
            display: flex;
            align-items: center;
            gap: 16px;
            margin-bottom: 24px;
        }
        
        .card-icon {
            width: 56px;
            height: 56px;
            background: linear-gradient(135deg, #FF6B6B 0%, #4ECDC4 100%);
            border-radius: 16px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 28px;
            box-shadow: 0 10px 30px rgba(255, 107, 107, 0.4);
        }
        
        .card-title {
            color: white;
            font-size: 24px;
            font-weight: 800;
            text-shadow: 0 0 20px rgba(255, 255, 255, 0.3);
        }
        
        .card-content {
            color: rgba(255, 255, 255, 0.9);
            line-height: 1.8;
            font-size: 16px;
        }
        
        .ai-analysis {
            background: 
                linear-gradient(135deg, rgba(0, 255, 255, 0.15) 0%, rgba(255, 0, 255, 0.15) 100%);
            border: 2px solid rgba(0, 255, 255, 0.4);
            border-radius: 24px;
            padding: 32px;
            margin-top: 32px;
            position: relative;
            overflow: hidden;
        }
        
        .ai-analysis::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 2px;
            background: linear-gradient(90deg, #00ffff, #ff00ff, #00ffff);
            animation: border-flow 3s linear infinite;
        }
        
        @keyframes border-flow {
            0% { transform: translateX(-100%); }
            100% { transform: translateX(100%); }
        }
        
        .ai-header {
            display: flex;
            align-items: center;
            gap: 16px;
            margin-bottom: 24px;
        }
        
        .ai-avatar {
            width: 60px;
            height: 60px;
            background: linear-gradient(135deg, #00ffff 0%, #ff00ff 100%);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 32px;
            animation: ai-pulse 3s ease-in-out infinite;
            box-shadow: 0 0 40px rgba(0, 255, 255, 0.6);
        }
        
        @keyframes ai-pulse {
            0%, 100% { 
                transform: scale(1);
                box-shadow: 0 0 40px rgba(0, 255, 255, 0.6);
            }
            50% { 
                transform: scale(1.1);
                box-shadow: 0 0 60px rgba(255, 0, 255, 0.8);
            }
        }
        
        .ai-name {
            color: white;
            font-weight: 900;
            font-size: 24px;
            text-shadow: 0 0 20px rgba(0, 255, 255, 0.5);
        }
        
        .ai-status {
            color: rgba(0, 255, 255, 0.9);
            font-size: 14px;
            font-weight: 600;
            text-transform: uppercase;
            letter-spacing: 1px;
        }
        
        .ai-message {
            background: rgba(0, 0, 0, 0.4);
            border-radius: 20px;
            padding: 24px;
            color: rgba(255, 255, 255, 0.95);
            line-height: 1.8;
            font-family: 'JetBrains Mono', monospace;
            font-size: 15px;
            border: 1px solid rgba(255, 255, 255, 0.1);
            box-shadow: inset 0 2px 10px rgba(0, 0, 0, 0.3);
        }
        
        .loading {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 12px;
            color: rgba(255, 255, 255, 0.8);
            font-size: 16px;
        }
        
        .spinner {
            width: 24px;
            height: 24px;
            border: 3px solid rgba(255, 255, 255, 0.3);
            border-top: 3px solid #00ffff;
            border-radius: 50%;
            animation: spin 1s linear infinite;
        }
        
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
        
        .status-indicator {
            position: fixed;
            top: 20px;
            right: 20px;
            background: rgba(0, 0, 0, 0.8);
            border: 1px solid rgba(0, 255, 0, 0.5);
            border-radius: 12px;
            padding: 12px 20px;
            color: #00ff00;
            font-weight: 600;
            font-size: 14px;
            z-index: 1000;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.5);
        }
        
        .status-indicator.error {
            border-color: rgba(255, 0, 0, 0.5);
            color: #ff0000;
        }
        
        .status-indicator.warning {
            border-color: rgba(255, 255, 0, 0.5);
            color: #ffff00;
        }
        
        @media (max-width: 1200px) {
            .dashboard-grid {
                grid-template-columns: 1fr;
            }
        }
        
        @media (max-width: 768px) {
            .title {
                font-size: 36px;
            }
            
            .dashboard-grid {
                grid-template-columns: 1fr;
                gap: 16px;
            }
            
            .analysis-section {
                grid-template-columns: 1fr;
            }
            
            .main-container {
                padding: 16px;
            }
        }
    </style>
</head>
<body>
    <!-- Neural Network Background -->
    <div class="neural-bg" id="neuralBg"></div>
    
    <!-- Status Indicator -->
    <div class="status-indicator" id="statusIndicator">
        <i class="fas fa-wifi"></i> Backend Connected
    </div>
    
    <div class="main-container">
        <!-- Advanced Header -->
        <div class="header">
            <div class="logo-container">
                <div class="logo-aura"></div>
                <div class="logo">ðŸª·</div>
            </div>
            <h1 class="title">Lakshmi AI Pro</h1>
            <p class="subtitle">Advanced Indian Market Intelligence Platform</p>
            <p class="tagline">Real-time NSE/BSE Analysis â€¢ DeepSeek V3 Integration â€¢ Professional Trading Insights</p>
        </div>
        
        <!-- Advanced Dashboard Grid -->
        <div class="dashboard-grid">
            <!-- Control Panel -->
            <div class="control-panel">
                <h2 class="panel-title">
                    <i class="fas fa-cogs"></i> Trading Control
                </h2>
                
                <div class="input-group">
                    <div class="input-field">
                        <label class="input-label">
                            <i class="fas fa-chart-line"></i> Market Symbol
                        </label>
                        <select class="form-select" id="symbol">
                            <optgroup label="ðŸ“Š MAJOR INDICES">
                                <option value="^NSEI" selected>NIFTY 50</option>
                                <option value="^NSEBANK">NIFTY BANK</option>
                                <option value="^CNXIT">NIFTY IT</option>
                                <option value="^CNXAUTO">NIFTY AUTO</option>
                                <option value="^CNXFMCG">NIFTY FMCG</option>
                                <option value="^CNXPHARMA">NIFTY PHARMA</option>
                                <option value="^CNXMETAL">NIFTY METAL</option>
                                <option value="^CNXREALTY">NIFTY REALTY</option>
                                <option value="^CNXENERGY">NIFTY ENERGY</option>
                                <option value="^CNXPSE">NIFTY PSE</option>
                                <option value="^CNXINFRA">NIFTY INFRA</option>
                                <option value="^CNXMIDCAP">NIFTY MIDCAP 100</option>
                                <option value="^CNXSMALLCAP">NIFTY SMALLCAP 100</option>
                                <option value="^BSESN">BSE SENSEX</option>
                            </optgroup>
                            
                            <optgroup label="ðŸ¦ TOP BANKING STOCKS">
                                <option value="HDFCBANK.NS">HDFC Bank</option>
                                <option value="ICICIBANK.NS">ICICI Bank</option>
                                <option value="SBIN.NS">State Bank of India</option>
                                <option value="KOTAKBANK.NS">Kotak Mahindra Bank</option>
                                <option value="AXISBANK.NS">Axis Bank</option>
                                <option value="INDUSINDBK.NS">IndusInd Bank</option>
                                <option value="BAJFINANCE.NS">Bajaj Finance</option>
                                <option value="BAJAJFINSV.NS">Bajaj Finserv</option>
                                <option value="HDFCLIFE.NS">HDFC Life Insurance</option>
                                <option value="SBILIFE.NS">SBI Life Insurance</option>
                            </optgroup>
                            
                            <optgroup label="ðŸ’» IT GIANTS">
                                <option value="TCS.NS">Tata Consultancy Services</option>
                                <option value="INFY.NS">Infosys</option>
                                <option value="HCLTECH.NS">HCL Technologies</option>
                                <option value="WIPRO.NS">Wipro</option>
                                <option value="TECHM.NS">Tech Mahindra</option>
                                <option value="LTI.NS">L&T Infotech</option>
                                <option value="MINDTREE.NS">Mindtree</option>
                                <option value="MPHASIS.NS">Mphasis</option>
                                <option value="COFORGE.NS">Coforge</option>
                                <option value="PERSISTENT.NS">Persistent Systems</option>
                            </optgroup>
                            
                            <optgroup label="ðŸ­ INDUSTRIAL LEADERS">
                                <option value="RELIANCE.NS">Reliance Industries</option>
                                <option value="LT.NS">Larsen & Toubro</option>
                                <option value="TATAMOTORS.NS">Tata Motors</option>
                                <option value="TATASTEEL.NS">Tata Steel</option>
                                <option value="ADANIPORTS.NS">Adani Ports</option>
                                <option value="ADANIENT.NS">Adani Enterprises</option>
                                <option value="ADANIGREEN.NS">Adani Green Energy</option>
                                <option value="BHARTIARTL.NS">Bharti Airtel</option>
                                <option value="ITC.NS">ITC Limited</option>
                                <option value="ULTRACEMCO.NS">UltraTech Cement</option>
                            </optgroup>
                            
                            <optgroup label="ðŸš— AUTOMOTIVE SECTOR">
                                <option value="MARUTI.NS">Maruti Suzuki</option>
                                <option value="M&M.NS">Mahindra & Mahindra</option>
                                <option value="BAJAJ-AUTO.NS">Bajaj Auto</option>
                                <option value="HEROMOTOCO.NS">Hero MotoCorp</option>
                                <option value="EICHERMOT.NS">Eicher Motors</option>
                                <option value="ASHOKLEY.NS">Ashok Leyland</option>
                                <option value="TVSMOTOR.NS">TVS Motor Company</option>
                                <option value="MOTHERSON.NS">Motherson Sumi</option>
                                <option value="BOSCHLTD.NS">Bosch Limited</option>
                                <option value="MRF.NS">MRF Limited</option>
                            </optgroup>
                            
                            <optgroup label="ðŸ’Š PHARMACEUTICAL">
                                <option value="SUNPHARMA.NS">Sun Pharmaceutical</option>
                                <option value="DRREDDY.NS">Dr. Reddy's Labs</option>
                                <option value="CIPLA.NS">Cipla</option>
                                <option value="DIVISLAB.NS">Divi's Laboratories</option>
                                <option value="BIOCON.NS">Biocon</option>
                                <option value="LUPIN.NS">Lupin</option>
                                <option value="AUROPHARMA.NS">Aurobindo Pharma</option>
                                <option value="CADILAHC.NS">Cadila Healthcare</option>
                                <option value="TORNTPHARM.NS">Torrent Pharmaceuticals</option>
                                <option value="ALKEM.NS">Alkem Laboratories</option>
                            </optgroup>
                            
                            <optgroup label="ðŸ›ï¸ CONSUMER GOODS">
                                <option value="HINDUNILVR.NS">Hindustan Unilever</option>
                                <option value="NESTLEIND.NS">Nestle India</option>
                                <option value="BRITANNIA.NS">Britannia Industries</option>
                                <option value="DABUR.NS">Dabur India</option>
                                <option value="GODREJCP.NS">Godrej Consumer</option>
                                <option value="MARICO.NS">Marico</option>
                                <option value="COLPAL.NS">Colgate-Palmolive</option>
                                <option value="EMAMILTD.NS">Emami</option>
                                <option value="BATAINDIA.NS">Bata India</option>
                                <option value="VBL.NS">Varun Beverages</option>
                            </optgroup>
                            
                            <optgroup label="âš¡ ENERGY & UTILITIES">
                                <option value="NTPC.NS">NTPC</option>
                                <option value="POWERGRID.NS">Power Grid Corporation</option>
                                <option value="ONGC.NS">Oil & Natural Gas Corp</option>
                                <option value="IOC.NS">Indian Oil Corporation</option>
                                <option value="BPCL.NS">Bharat Petroleum</option>
                                <option value="HINDPETRO.NS">Hindustan Petroleum</option>
                                <option value="GAIL.NS">GAIL India</option>
                                <option value="TATAPOWER.NS">Tata Power</option>
                                <option value="TORNTPOWER.NS">Torrent Power</option>
                                <option value="NHPC.NS">NHPC</option>
                            </optgroup>
                            
                            <optgroup label="ðŸ—ï¸ METALS & MINING">
                                <option value="HINDALCO.NS">Hindalco Industries</option>
                                <option value="VEDL.NS">Vedanta Limited</option>
                                <option value="JSWSTEEL.NS">JSW Steel</option>
                                <option value="SAIL.NS">Steel Authority of India</option>
                                <option value="COALINDIA.NS">Coal India</option>
                                <option value="NMDC.NS">NMDC</option>
                                <option value="JINDALSTEL.NS">Jindal Steel & Power</option>
                                <option value="HINDZINC.NS">Hindustan Zinc</option>
                                <option value="NATIONALUM.NS">National Aluminium</option>
                                <option value="MOIL.NS">MOIL</option>
                            </optgroup>
                            
                            <optgroup label="ðŸ  REAL ESTATE">
                                <option value="DLF.NS">DLF Limited</option>
                                <option value="GODREJPROP.NS">Godrej Properties</option>
                                <option value="OBEROIRLTY.NS">Oberoi Realty</option>
                                <option value="PRESTIGE.NS">Prestige Estates</option>
                                <option value="SOBHA.NS">Sobha Limited</option>
                                <option value="BRIGADE.NS">Brigade Enterprises</option>
                                <option value="PHOENIXLTD.NS">Phoenix Mills</option>
                                <option value="MAHLIFE.NS">Mahindra Lifespace</option>
                                <option value="SUNTECK.NS">Sunteck Realty</option>
                                <option value="KOLTEPATIL.NS">Kolte-Patil Developers</option>
                            </optgroup>
                            
                            <optgroup label="ðŸ›’ NEW AGE TECH">
                                <option value="NYKAA.NS">Nykaa</option>
                                <option value="ZOMATO.NS">Zomato</option>
                                <option value="PAYTM.NS">Paytm</option>
                                <option value="POLICYBZR.NS">PB Fintech</option>
                                <option value="CARTRADE.NS">CarTrade Tech</option>
                                <option value="EASEMYTRIP.NS">Easy Trip Planners</option>
                            </optgroup>
                            
                            <optgroup label="ðŸŽ¯ CUSTOM SYMBOL">
                                <option value="CUSTOM">Enter Custom Symbol</option>
                            </optgroup>
                        </select>
                        <div class="input-wrapper" id="customSymbolWrapper" style="display: none; margin-top: 12px;">
                            <input type="text" class="form-input" id="customSymbol" placeholder="e.g., RELIANCE.NS, ^NSEI">
                        </div>
                    </div>
                    
                    <div class="input-field">
                        <label class="input-label">
                            <i class="fas fa-calendar-alt"></i> Time Period
                        </label>
                        <select class="form-select" id="period">
                            <option value="1d">1 Day</option>
                            <option value="5d">5 Days</option>
                            <option value="1mo" selected>1 Month</option>
                            <option value="3mo">3 Months</option>
                            <option value="6mo">6 Months</option>
                            <option value="1y">1 Year</option>
                            <option value="2y">2 Years</option>
                            <option value="5y">5 Years</option>
                        </select>
                    </div>
                    
                    <div class="input-field">
                        <label class="input-label">
                            <i class="fas fa-chess-knight"></i> Strategy
                        </label>
                        <select class="form-select" id="strategy">
                            <option value="scalping">Scalping (Minutes)</option>
                            <option value="intraday" selected>Intraday (Same Day)</option>
                            <option value="swing">Swing Trading (Days)</option>
                            <option value="positional">Positional (Weeks/Months)</option>
                            <option value="longterm">Long Term (Years)</option>
                        </select>
                    </div>
                    
                    <div class="input-field">
                        <label class="input-label">
                            <i class="fas fa-shield-alt"></i> Risk Level
                        </label>
                        <select class="form-select" id="risk">
                            <option value="conservative">Conservative (Low Risk)</option>
                            <option value="moderate" selected>Moderate (Medium Risk)</option>
                            <option value="aggressive">Aggressive (High Risk)</option>
                            <option value="speculative">Speculative (Very High Risk)</option>
                        </select>
                    </div>
                </div>
                
                <div class="action-buttons">
                    <button class="action-btn primary-btn" id="analyzeBtn">
                        <i class="fas fa-brain"></i> DeepSeek V3 Analysis
                    </button>
                    <button class="action-btn secondary-btn" id="liveDataBtn">
                        <i class="fas fa-chart-line"></i> Live Market Data
                    </button>
                    <button class="action-btn tertiary-btn" id="technicalBtn">
                        <i class="fas fa-calculator"></i> Technical Analysis
                    </button>
                </div>
            </div>
            
            <!-- Main Display -->
            <div class="main-display">
                <div class="chart-container">
                    <canvas id="priceChart"></canvas>
                </div>
            </div>
            
            <!-- Metrics Panel -->
            <div class="metrics-panel">
                <h2 class="panel-title">
                    <i class="fas fa-tachometer-alt"></i> Live Metrics
                </h2>
                
                <div class="metrics-grid" id="metricsGrid">
                    <div class="metric-card">
                        <div class="metric-value" id="currentPrice">â‚¹0.00</div>
                        <div class="metric-label">Current Price</div>
                    </div>
                    
                    <div class="metric-card">
                        <div class="metric-value" id="priceChange">+â‚¹0.00</div>
                        <div class="metric-label">Change</div>
                    </div>
                    
                    <div class="metric-card">
                        <div class="metric-value" id="changePercent">+0.00%</div>
                        <div class="metric-label">Change %</div>
                    </div>
                    
                    <div class="metric-card">
                        <div class="metric-value" id="volume">0</div>
                        <div class="metric-label">Volume</div>
                    </div>
                    
                    <div class="metric-card">
                        <div class="metric-value" id="dayHigh">â‚¹0.00</div>
                        <div class="metric-label">Day High</div>
                    </div>
                    
                    <div class="metric-card">
                        <div class="metric-value" id="dayLow">â‚¹0.00</div>
                        <div class="metric-label">Day Low</div>
                    </div>
                    
                    <div class="metric-card">
                        <div class="metric-value" id="rsi">0.0</div>
                        <div class="metric-label">RSI (14)</div>
                    </div>
                    
                    <div class="metric-card">
                        <div class="metric-value" id="macd">0.000</div>
                        <div class="metric-label">MACD</div>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- Analysis Section -->
        <div class="analysis-section" id="analysisSection" style="display: none;">
            <!-- Market Data Card -->
            <div class="analysis-card">
                <div class="card-header">
                    <div class="card-icon">
                        <i class="fas fa-chart-candlestick"></i>
                    </div>
                    <div>
                        <div class="card-title">Market Analysis</div>
                    </div>
                </div>
                <div class="card-content" id="marketAnalysis">
                    <div class="loading">
                        <div class="spinner"></div>
                        Analyzing market data...
                    </div>
                </div>
            </div>
            
            <!-- Technical Analysis Card -->
            <div class="analysis-card">
                <div class="card-header">
                    <div class="card-icon">
                        <i class="fas fa-calculator"></i>
                    </div>
                    <div>
                        <div class="card-title">Technical Indicators</div>
                    </div>
                </div>
                <div class="card-content" id="technicalAnalysis">
                    <div class="loading">
                        <div class="spinner"></div>
                        Calculating technical indicators...
                    </div>
                </div>
            </div>
        </div>
        
        <!-- AI Analysis Section -->
        <div class="ai-analysis" id="aiAnalysis" style="display: none;">
            <div class="ai-header">
                <div class="ai-avatar">ðŸ§ </div>
                <div>
                    <div class="ai-name">DeepSeek V3 AI</div>
                    <div class="ai-status">Advanced Market Intelligence</div>
                </div>
            </div>
            <div class="ai-message" id="aiMessage">
                <div class="loading">
                    <div class="spinner"></div>
                    DeepSeek V3 is analyzing market patterns and generating insights...
                </div>
            </div>
        </div>
    </div>

    <script>
        // Global variables
        let priceChart = null;
        let currentData = null;
        let isAnalyzing = false;
        
        // Your Flask backend URL
        const API_BASE = 'https://lakshmi-ai-trading-mw31.onrender.com';
        
        // Flask routes that your backend needs to implement
        const FLASK_ROUTES = {
            marketData: '/api/market-data',
            technicalAnalysis: '/api/technical-analysis',
            deepseekAnalysis: '/api/deepseek-analysis',
            liveData: '/api/live-data'
        };
        
        // Initialize neural network background
        function initNeuralBackground() {
            const neuralBg = document.getElementById('neuralBg');
            
            // Create neural nodes
            for (let i = 0; i < 50; i++) {
                const node = document.createElement('div');
                node.className = 'neural-node';
                node.style.left = Math.random() * 100 + '%';
                node.style.top = Math.random() * 100 + '%';
                node.style.animationDelay = Math.random() * 3 + 's';
                neuralBg.appendChild(node);
            }
            
            // Create neural connections
            for (let i = 0; i < 30; i++) {
                const connection = document.createElement('div');
                connection.className = 'neural-connection';
                connection.style.left = Math.random() * 100 + '%';
                connection.style.top = Math.random() * 100 + '%';
                connection.style.width = Math.random() * 200 + 100 + 'px';
                connection.style.transform = `rotate(${Math.random() * 360}deg)`;
                connection.style.animationDelay = Math.random() * 2 + 's';
                neuralBg.appendChild(connection);
            }
        }
        
        // Status indicator management
        function updateStatus(message, type = 'success') {
            const indicator = document.getElementById('statusIndicator');
            indicator.className = `status-indicator ${type}`;
            
            const icons = {
                success: 'fas fa-check-circle',
                error: 'fas fa-exclamation-triangle',
                warning: 'fas fa-exclamation-circle',
                loading: 'fas fa-spinner fa-spin'
            };
            
            indicator.innerHTML = `<i class="${icons[type]}"></i> ${message}`;
        }
        
        // Advanced API call with proper error handling
        async function makeAPICall(endpoint, data) {
            try {
                updateStatus('Connecting to backend...', 'loading');
                
                const response = await fetch(`${API_BASE}${endpoint}`, {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                        'Accept': 'application/json'
                    },
                    body: JSON.stringify(data)
                });
                
                if (!response.ok) {
                    const errorData = await response.json().catch(() => ({}));
                    throw new Error(`API Error ${response.status}: ${errorData.error || response.statusText}`);
                }
                
                const result = await response.json();
                updateStatus('Backend connected', 'success');
                return result;
                
            } catch (error) {
                console.error(`API call failed:`, error);
                updateStatus(`Connection failed: ${error.message}`, 'error');
                throw error;
            }
        }
        
        // Fetch real market data
        async function fetchMarketData(symbol, period) {
            const data = await makeAPICall(FLASK_ROUTES.marketData, {
                symbol: symbol,
                period: period,
                indicators: ['sma', 'ema', 'rsi', 'macd', 'bollinger'],
                exchange: symbol.includes('.NS') ? 'NSE' : symbol.includes('.BO') ? 'BSE' : 'INDEX'
            });
            
            return data;
        }
        
        // Fetch technical analysis
        async function fetchTechnicalAnalysis(symbol, period) {
            const data = await makeAPICall(FLASK_ROUTES.technicalAnalysis, {
                symbol: symbol,
                period: period,
                indicators: {
                    momentum: ['rsi', 'stoch', 'williams'],
                    trend: ['sma', 'ema', 'macd', 'adx'],
                    volatility: ['bollinger', 'atr'],
                    volume: ['obv', 'vwap']
                }
            });
            
            return data;
        }
        
        // Get DeepSeek V3 analysis
        async function getDeepSeekAnalysis(symbol, period, strategy, risk) {
            const data = await makeAPICall(FLASK_ROUTES.deepseekAnalysis, {
                symbol: symbol,
                period: period,
                strategy: strategy,
                risk: risk,
                marketData: currentData,
                analysisType: 'comprehensive',
                includeSignals: true,
                includePredictions: true
            });
            
            return data;
        }
        
        // Create advanced price chart
        function createAdvancedChart(data) {
            const ctx = document.getElementById('priceChart').getContext('2d');
            
            if (priceChart) {
                priceChart.destroy();
            }
            
            const chartData = {
                labels: data.timestamps.map(ts => new Date(ts)),
                datasets: [
                    {
                        label: 'Price (â‚¹)',
                        data: data.prices,
                        borderColor: '#FFD700',
                        backgroundColor: 'rgba(255, 215, 0, 0.1)',
                        borderWidth: 3,
                        fill: true,
                        tension: 0.4,
                        pointRadius: 0,
                        pointHoverRadius: 6
                    },
                    {
                        label: 'SMA (20)',
                        data: data.sma_20 || [],
                        borderColor: '#FF6B6B',
                        backgroundColor: 'transparent',
                        borderWidth: 2,
                        fill: false,
                        tension: 0.4,
                        pointRadius: 0
                    },
                    {
                        label: 'EMA (12)',
                        data: data.ema_12 || [],
                        borderColor: '#4ECDC4',
                        backgroundColor: 'transparent',
                        borderWidth: 2,
                        fill: false,
                        tension: 0.4,
                        pointRadius: 0
                    }
                ]
            };
            
            priceChart = new Chart(ctx, {
                type: 'line',
                data: chartData,
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    interaction: {
                        intersect: false,
                        mode: 'index'
                    },
                    plugins: {
                        legend: {
                            labels: {
                                color: 'white',
                                font: {
                                    size: 14,
                                    weight: 'bold'
                                }
                            }
                        },
                        tooltip: {
                            backgroundColor: 'rgba(0, 0, 0, 0.8)',
                            titleColor: '#FFD700',
                            bodyColor: 'white',
                            borderColor: '#FFD700',
                            borderWidth: 1
                        }
                    },
                    scales: {
                        x: {
                            type: 'time',
                            time: {
                                displayFormats: {
                                    day: 'MMM dd',
                                    hour: 'HH:mm'
                                }
                            },
                            ticks: {
                                color: 'rgba(255, 255, 255, 0.8)',
                                font: {
                                    size: 12,
                                    weight: 'bold'
                                }
                            },
                            grid: {
                                color: 'rgba(255, 255, 255, 0.1)'
                            }
                        },
                        y: {
                            ticks: {
                                color: 'rgba(255, 255, 255, 0.8)',
                                font: {
                                    size: 12,
                                    weight: 'bold'
                                },
                                callback: function(value) {
                                    return 'â‚¹' + value.toFixed(2);
                                }
                            },
                            grid: {
                                color: 'rgba(255, 255, 255, 0.1)'
                            }
                        }
                    }
                }
            });
        }
        
        // Update metrics display
        function updateMetrics(data) {
            const currentPrice = data.current_price || data.prices[data.prices.length - 1];
            const change = data.price_change || 0;
            const changePercent = data.change_percent || 0;
            
            document.getElementById('currentPrice').textContent = `â‚¹${currentPrice.toFixed(2)}`;
            
            const changeElement = document.getElementById('priceChange');
            const changePercentElement = document.getElementById('changePercent');
            
            const changeColor = change >= 0 ? '#00ff7f' : '#ff4757';
            changeElement.style.color = changeColor;
            changePercentElement.style.color = changeColor;
            
            changeElement.textContent = `${change >= 0 ? '+' : ''}â‚¹${change.toFixed(2)}`;
            changePercentElement.textContent = `${changePercent.toFixed(2)}%`;
            
            document.getElementById('volume').textContent = (data.volume || 0).toLocaleString();
            document.getElementById('dayHigh').textContent = `â‚¹${(data.day_high || currentPrice).toFixed(2)}`;
            document.getElementById('dayLow').textContent = `â‚¹${(data.day_low || currentPrice).toFixed(2)}`;
            document.getElementById('rsi').textContent = (data.rsi || 0).toFixed(1);
            document.getElementById('macd').textContent = (data.macd || 0).toFixed(3);
        }
        
        // Display market analysis
        function displayMarketAnalysis(data) {
            const analysisDiv = document.getElementById('marketAnalysis');
            
            analysisDiv.innerHTML = `
                <div style="margin-bottom: 20px;">
                    <h4 style="color: #FFD700; margin-bottom: 12px; font-size: 18px;">ðŸ“Š Market Overview</h4>
                    <div style="background: rgba(255, 215, 0, 0.1); padding: 16px; border-radius: 12px; border-left: 4px solid #FFD700;">
                        <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(120px, 1fr)); gap: 12px;">
                            <div>
                                <div style="color: #FFD700; font-weight: bold;">Current Price</div>
                                <div style="color: white; font-size: 18px;">â‚¹${data.current_price.toFixed(2)}</div>
                            </div>
                            <div>
                                <div style="color: #FFD700; font-weight: bold;">Market Cap</div>
                                <div style="color: white; font-size: 18px;">${data.market_cap || 'N/A'}</div>
                            </div>
                            <div>
                                <div style="color: #FFD700; font-weight: bold;">P/E Ratio</div>
                                <div style="color: white; font-size: 18px;">${data.pe_ratio || 'N/A'}</div>
                            </div>
                            <div>
                                <div style="color: #FFD700; font-weight: bold;">52W High</div>
                                <div style="color: white; font-size: 18px;">â‚¹${(data.week_52_high || 0).toFixed(2)}</div>
                            </div>
                        </div>
                    </div>
                </div>
                
                <div style="margin-bottom: 20px;">
                    <h4 style="color: #4ECDC4; margin-bottom: 12px; font-size: 18px;">ðŸ“ˆ Trend Analysis</h4>
                    <div style="background: rgba(78, 205, 196, 0.1); padding: 16px; border-radius: 12px; border-left: 4px solid #4ECDC4;">
                        <div style="color: white; line-height: 1.6;">
                            <strong>Primary Trend:</strong> ${data.primary_trend || 'ANALYZING'}<br>
                            <strong>Support Level:</strong> â‚¹${(data.support_level || 0).toFixed(2)}<br>
                            <strong>Resistance Level:</strong> â‚¹${(data.resistance_level || 0).toFixed(2)}<br>
                            <strong>Volume Trend:</strong> ${data.volume_trend || 'NORMAL'}
                        </div>
                    </div>
                </div>
                
                <div>
                    <h4 style="color: #FF6B6B; margin-bottom: 12px; font-size: 18px;">âš¡ Real-time Status</h4>
                    <div style="background: rgba(255, 107, 107, 0.1); padding: 16px; border-radius: 12px; border-left: 4px solid #FF6B6B;">
                        <div style="color: white; font-size: 14px;">
                            <strong>Data Source:</strong> ${data.source || 'Yahoo Finance API'}<br>
                            <strong>Exchange:</strong> ${data.exchange || 'NSE'}<br>
                            <strong>Last Updated:</strong> ${new Date(data.timestamp || Date.now()).toLocaleString('en-IN')}<br>
                            <strong>Market Status:</strong> <span style="color: #00ff7f;">LIVE</span>
                        </div>
                    </div>
                </div>
            `;
        }
        
        // Display technical analysis
        function displayTechnicalAnalysis(technical) {
            const technicalDiv = document.getElementById('technicalAnalysis');
            
            technicalDiv.innerHTML = `
                <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(150px, 1fr)); gap: 16px; margin-bottom: 20px;">
                    <div style="background: rgba(255, 255, 255, 0.05); padding: 16px; border-radius: 12px; text-align: center;">
                        <div style="color: #FFD700; font-weight: bold; margin-bottom: 8px;">RSI (14)</div>
                        <div style="color: ${technical.rsi > 70 ? '#ff4757' : technical.rsi < 30 ? '#00ff7f' : '#00ffff'}; font-size: 24px; font-weight: bold;">
                            ${(technical.rsi || 0).toFixed(1)}
                        </div>
                        <div style="color: rgba(255, 255, 255, 0.7); font-size: 12px;">
                            ${technical.rsi > 70 ? 'OVERBOUGHT' : technical.rsi < 30 ? 'OVERSOLD' : 'NEUTRAL'}
                        </div>
                    </div>
                    
                    <div style="background: rgba(255, 255, 255, 0.05); padding: 16px; border-radius: 12px; text-align: center;">
                        <div style="color: #FFD700; font-weight: bold; margin-bottom: 8px;">MACD</div>
                        <div style="color: ${technical.macd > 0 ? '#00ff7f' : '#ff4757'}; font-size: 24px; font-weight: bold;">
                            ${(technical.macd || 0).toFixed(3)}
                        </div>
                        <div style="color: rgba(255, 255, 255, 0.7); font-size: 12px;">
                            ${technical.macd > 0 ? 'BULLISH' : 'BEARISH'}
                        </div>
                    </div>
                    
                    <div style="background: rgba(255, 255, 255, 0.05); padding: 16px; border-radius: 12px; text-align: center;">
                        <div style="color: #FFD700; font-weight: bold; margin-bottom: 8px;">SMA (20)</div>
                        <div style="color: #4ECDC4; font-size: 24px; font-weight: bold;">
                            â‚¹${(technical.sma_20 || 0).toFixed(2)}
                        </div>
                    </div>
                    
                    <div style="background: rgba(255, 255, 255, 0.05); padding: 16px; border-radius: 12px; text-align: center;">
                        <div style="color: #FFD700; font-weight: bold; margin-bottom: 8px;">EMA (12)</div>
                        <div style="color: #FF6B6B; font-size: 24px; font-weight: bold;">
                            â‚¹${(technical.ema_12 || 0).toFixed(2)}
                        </div>
                    </div>
                </div>
                
                <div style="background: rgba(0, 255, 255, 0.1); padding: 16px; border-radius: 12px; border-left: 4px solid #00ffff;">
                    <h4 style="color: #00ffff; margin-bottom: 12px;">ðŸŽ¯ Trading Signals</h4>
                    <div style="color: white; line-height: 1.6;">
                        <strong>Overall Signal:</strong> <span style="color: ${technical.signal === 'BUY' ? '#00ff7f' : technical.signal === 'SELL' ? '#ff4757' : '#ffff00'};">
                            ${technical.signal || 'HOLD'}
                        </span><br>
                        <strong>Trend Direction:</strong> ${technical.trend || 'SIDEWAYS'}<br>
                        <strong>Volatility:</strong> ${technical.volatility || 'NORMAL'}<br>
                        <strong>Volume Analysis:</strong> ${technical.volume_analysis || 'AVERAGE'}
                    </div>
                </div>
            `;
        }
        
        // Display AI analysis
        function displayAIAnalysis(analysis) {
            const aiMessageDiv = document.getElementById('aiMessage');
            
            aiMessageDiv.innerHTML = `
                <div style="margin-bottom: 24px;">
                    <h3 style="color: #FFD700; margin-bottom: 16px; font-size: 20px;">ðŸŽ¯ DeepSeek V3 Trading Strategy</h3>
                    <div style="background: rgba(255, 215, 0, 0.1); padding: 20px; border-radius: 16px; border-left: 4px solid #FFD700;">
                        <p style="white-space: pre-line; line-height: 1.8;">${analysis.strategy || 'Generating comprehensive trading strategy...'}</p>
                    </div>
                </div>
                
                <div style="margin-bottom: 24px;">
                    <h3 style="color: #4ECDC4; margin-bottom: 16px; font-size: 20px;">ðŸ“Š Market Intelligence</h3>
                    <div style="background: rgba(78, 205, 196, 0.1); padding: 20px; border-radius: 16px; border-left: 4px solid #4ECDC4;">
                        <p style="white-space: pre-line; line-height: 1.8;">${analysis.market_analysis || 'Analyzing market conditions and patterns...'}</p>
                    </div>
                </div>
                
                <div style="margin-bottom: 24px;">
                    <h3 style="color: #FF6B6B; margin-bottom: 16px; font-size: 20px;">âš¡ Entry/Exit Signals</h3>
                    <div style="background: rgba(255, 107, 107, 0.1); padding: 20px; border-radius: 16px; border-left: 4px solid #FF6B6B;">
                        <p style="white-space: pre-line; line-height: 1.8;">${analysis.entry_exit || 'Calculating optimal entry and exit points...'}</p>
                    </div>
                </div>
                
                <div style="margin-bottom: 24px;">
                    <h3 style="color: #9B59B6; margin-bottom: 16px; font-size: 20px;">âš ï¸ Risk Management</h3>
                    <div style="background: rgba(155, 89, 182, 0.1); padding: 20px; border-radius: 16px; border-left: 4px solid #9B59B6;">
                        <p style="white-space: pre-line; line-height: 1.8;">${analysis.risk_management || 'Developing risk management framework...'}</p>
                    </div>
                </div>
                
                <div style="background: linear-gradient(135deg, rgba(0, 255, 255, 0.1), rgba(255, 0, 255, 0.1)); padding: 20px; border-radius: 16px; border: 1px solid rgba(0, 255, 255, 0.3);">
                    <h3 style="color: #00ffff; margin-bottom: 16px; font-size: 20px;">ðŸ”® AI Performance Metrics</h3>
                    <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(150px, 1fr)); gap: 16px; margin-bottom: 16px;">
                        <div style="text-align: center;">
                            <div style="color: #FFD700; font-size: 24px; font-weight: bold;">${analysis.confidence || 87}%</div>
                            <div style="color: rgba(255, 255, 255, 0.8); font-size: 12px;">Confidence</div>
                        </div>
                        <div style="text-align: center;">
                            <div style="color: #4ECDC4; font-size: 24px; font-weight: bold;">${analysis.accuracy || 92}%</div>
                            <div style="color: rgba(255, 255, 255, 0.8); font-size: 12px;">Accuracy</div>
                        </div>
                        <div style="text-align: center;">
                            <div style="color: #FF6B6B; font-size: 24px; font-weight: bold;">${analysis.tokens_used || 'N/A'}</div>
                            <div style="color: rgba(255, 255, 255, 0.8); font-size: 12px;">Tokens Used</div>
                        </div>
                        <div style="text-align: center;">
                            <div style="color: #9B59B6; font-size: 24px; font-weight: bold;">$${analysis.cost || 'N/A'}</div>
                            <div style="color: rgba(255, 255, 255, 0.8); font-size: 12px;">API Cost</div>
                        </div>
                    </div>
                    <div style="font-size: 14px; color: rgba(255, 255, 255, 0.8); text-align: center;">
                        Model: ${analysis.model || 'DeepSeek V3'} via OpenRouter API<br>
                        Analysis completed at: ${new Date(analysis.timestamp || Date.now()).toLocaleString('en-IN')}
                    </div>
                </div>
                
                ${analysis.full_response ? `
                <div style="margin-top: 24px; background: rgba(0, 0, 0, 0.4); padding: 20px; border-radius: 16px; border: 1px solid rgba(255, 255, 255, 0.1);">
                    <h3 style="color: #ff00ff; margin-bottom: 16px; font-size: 18px;">ðŸ¤– Complete DeepSeek V3 Response</h3>
                    <div style="white-space: pre-line; font-family: 'JetBrains Mono', monospace; font-size: 14px; line-height: 1.6; max-height: 500px; overflow-y: auto; color: rgba(255, 255, 255, 0.9);">
                        ${analysis.full_response}
                    </div>
                </div>
                ` : ''}
            `;
        }
        
        // Main analysis function
        async function performComprehensiveAnalysis() {
            if (isAnalyzing) return;
            
            const symbol = getSelectedSymbol();
            const period = document.getElementById('period').value;
            const strategy = document.getElementById('strategy').value;
            const risk = document.getElementById('risk').value;
            
            const analyzeBtn = document.getElementById('analyzeBtn');
            const analysisSection = document.getElementById('analysisSection');
            const aiAnalysis = document.getElementById('aiAnalysis');
            
            isAnalyzing = true;
            analyzeBtn.disabled = true;
            analyzeBtn.innerHTML = '<i class="fas fa-spinner fa-spin"></i> Analyzing...';
            
            try {
                // Show sections
                analysisSection.style.display = 'grid';
                aiAnalysis.style.display = 'block';
                
                updateStatus('Fetching market data...', 'loading');
                
                // Fetch market data
                const marketData = await fetchMarketData(symbol, period);
                currentData = marketData;
                
                // Update displays
                createAdvancedChart(marketData);
                updateMetrics(marketData);
                displayMarketAnalysis(marketData);
                
                updateStatus('Calculating technical indicators...', 'loading');
                
                // Fetch technical analysis
                const technicalData = await fetchTechnicalAnalysis(symbol, period);
                displayTechnicalAnalysis(technicalData);
                
                updateStatus('Getting DeepSeek V3 analysis...', 'loading');
                
                // Get AI analysis
                const aiAnalysisData = await getDeepSeekAnalysis(symbol, period, strategy, risk);
                displayAIAnalysis(aiAnalysisData);
                
                updateStatus('Analysis complete', 'success');
                
            } catch (error) {
                console.error('Analysis error:', error);
                updateStatus(`Analysis failed: ${error.message}`, 'error');
                
                document.getElementById('aiMessage').innerHTML = `
                    <div style="text-align: center; padding: 40px;">
                        <div style="font-size: 64px; margin-bottom: 20px;">âš ï¸</div>
                        <h3 style="color: #ff4757; margin-bottom: 16px;">Analysis Failed</h3>
                        <p style="color: rgba(255, 255, 255, 0.8); margin-bottom: 20px; line-height: 1.6;">
                            ${error.message}
                        </p>
                        <div style="background: rgba(255, 71, 87, 0.1); padding: 16px; border-radius: 12px; border-left: 4px solid #ff4757;">
                            <h4 style="color: #ff4757; margin-bottom: 8px;">Required Flask Routes:</h4>
                            <div style="font-family: 'JetBrains Mono', monospace; font-size: 14px; color: rgba(255, 255, 255, 0.8);">
                                POST ${API_BASE}/api/market-data<br>
                                POST ${API_BASE}/api/technical-analysis<br>
                                POST ${API_BASE}/api/deepseek-analysis
                            </div>
                        </div>
                    </div>
                `;
            } finally {
                isAnalyzing = false;
                analyzeBtn.disabled = false;
                analyzeBtn.innerHTML = '<i class="fas fa-brain"></i> DeepSeek V3 Analysis';
            }
        }
        
        // Live data function
        async function fetchLiveData() {
            const symbol = getSelectedSymbol();
            const liveDataBtn = document.getElementById('liveDataBtn');
            
            liveDataBtn.disabled = true;
            liveDataBtn.innerHTML = '<i class="fas fa-spinner fa-spin"></i> Fetching...';
            
            try {
                const marketData = await fetchMarketData(symbol, '1d');
                currentData = marketData;
                
                createAdvancedChart(marketData);
                updateMetrics(marketData);
                
                document.getElementById('analysisSection').style.display = 'grid';
                displayMarketAnalysis(marketData);
                
            } catch (error) {
                console.error('Live data error:', error);
                updateStatus(`Live data failed: ${error.message}`, 'error');
            } finally {
                liveDataBtn.disabled = false;
                liveDataBtn.innerHTML = '<i class="fas fa-chart-line"></i> Live Market Data';
            }
        }
        
        // Technical analysis function
        async function performTechnicalAnalysis() {
            const symbol = getSelectedSymbol();
            const period = document.getElementById('period').value;
            const technicalBtn = document.getElementById('technicalBtn');
            
            technicalBtn.disabled = true;
            technicalBtn.innerHTML = '<i class="fas fa-spinner fa-spin"></i> Calculating...';
            
            try {
                const technicalData = await fetchTechnicalAnalysis(symbol, period);
                
                document.getElementById('analysisSection').style.display = 'grid';
                displayTechnicalAnalysis(technicalData);
                
            } catch (error) {
                console.error('Technical analysis error:', error);
                updateStatus(`Technical analysis failed: ${error.message}`, 'error');
            } finally {
                technicalBtn.disabled = false;
                technicalBtn.innerHTML = '<i class="fas fa-calculator"></i> Technical Analysis';
            }
        }
        
        // Handle custom symbol input
        document.getElementById('symbol').addEventListener('change', function() {
            const customWrapper = document.getElementById('customSymbolWrapper');
            if (this.value === 'CUSTOM') {
                customWrapper.style.display = 'block';
            } else {
                customWrapper.style.display = 'none';
            }
        });
        
        // Get selected symbol
        function getSelectedSymbol() {
            const symbolSelect = document.getElementById('symbol');
            if (symbolSelect.value === 'CUSTOM') {
                const customSymbol = document.getElementById('customSymbol').value.trim().toUpperCase();
                if (!customSymbol) {
                    throw new Error('Please enter a custom symbol');
                }
                return customSymbol;
            }
            return symbolSelect.value;
        }
        
        // Event listeners
        document.getElementById('analyzeBtn').addEventListener('click', performComprehensiveAnalysis);
        document.getElementById('liveDataBtn').addEventListener('click', fetchLiveData);
        document.getElementById('technicalBtn').addEventListener('click', performTechnicalAnalysis);
        
        // Initialize application
        document.addEventListener('DOMContentLoaded', function() {
            initNeuralBackground();
            
            // Show welcome message
            document.getElementById('aiMessage').innerHTML = `
                <div style="text-align: center; padding: 40px;">
                    <div style="font-size: 80px; margin-bottom: 24px; animation: divine-rotation 8s linear infinite;">ðŸª·</div>
                    <h2 style="color: #FFD700; margin-bottom: 20px; font-size: 28px;">Lakshmi AI Pro - Ready for Action</h2>
                    <p style="color: rgba(255, 255, 255, 0.9); margin-bottom: 24px; font-size: 18px; line-height: 1.6;">
                        Advanced Indian Market Intelligence Platform<br>
                        Powered by DeepSeek V3 & Real-time Market Data
                    </p>
                    
                    <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 16px; margin-bottom: 24px;">
                        <div style="background: rgba(0, 255, 0, 0.1); padding: 16px; border-radius: 12px; border-left: 4px solid #00ff00;">
                            <div style="color: #00ff00; font-weight: bold; margin-bottom: 8px;">âœ… Real API Integration</div>
                            <div style="color: rgba(255, 255, 255, 0.8); font-size: 14px;">
                                Connected to your Flask backend<br>
                                OpenRouter DeepSeek V3 ready
                            </div>
                        </div>
                        
                        <div style="background: rgba(255, 215, 0, 0.1); padding: 16px; border-radius: 12px; border-left: 4px solid #FFD700;">
                            <div style="color: #FFD700; font-weight: bold; margin-bottom: 8px;">ðŸ“Š Complete Market Coverage</div>
                            <div style="color: rgba(255, 255, 255, 0.8); font-size: 14px;">
                                All NSE/BSE stocks & indices<br>
                                Real-time Yahoo Finance data
                            </div>
                        </div>
                        
                        <div style="background: rgba(0, 255, 255, 0.1); padding: 16px; border-radius: 12px; border-left: 4px solid #00ffff;">
                            <div style="color: #00ffff; font-weight: bold; margin-bottom: 8px;">ðŸ§  Advanced AI Analysis</div>
                            <div style="color: rgba(255, 255, 255, 0.8); font-size: 14px;">
                                Professional trading insights<br>
                                Technical indicator calculations
                            </div>
                        </div>
                    </div>
                    
                    <div style="background: rgba(255, 255, 255, 0.05); padding: 20px; border-radius: 16px; border: 1px solid rgba(255, 255, 255, 0.1);">
                        <h3 style="color: #ff00ff; margin-bottom: 12px;">ðŸš€ Required Flask Routes for Your Backend:</h3>
                        <div style="font-family: 'JetBrains Mono', monospace; font-size: 14px; color: rgba(255, 255, 255, 0.9); text-align: left;">
                            <strong>POST</strong> ${API_BASE}/api/market-data<br>
                            <strong>POST</strong> ${API_BASE}/api/technical-analysis<br>
                            <strong>POST</strong> ${API_BASE}/api/deepseek-analysis
                        </div>
                    </div>
                    
                    <p style="color: rgba(255, 255, 255, 0.7); font-size: 16px; margin-top: 24px;">
                        Select a symbol and start your professional market analysis!
                    </p>
                </div>
            `;
            
            document.getElementById('aiAnalysis').style.display = 'block';
            updateStatus('Ready for analysis', 'success');
        });
    </script>
<script>(function(){function c(){var b=a.contentDocument||a.contentWindow.document;if(b){var d=b.createElement('script');d.innerHTML="window.__CF$cv$params={r:'975ec3a405e693c5',t:'MTc1NjMzMTIxNC4wMDAwMDA='};var a=document.createElement('script');a.nonce='';a.src='/cdn-cgi/challenge-platform/scripts/jsd/main.js';document.getElementsByTagName('head')[0].appendChild(a);";b.getElementsByTagName('head')[0].appendChild(d)}}if(document.body){var a=document.createElement('iframe');a.height=1;a.width=1;a.style.position='absolute';a.style.top=0;a.style.left=0;a.style.border='none';a.style.visibility='hidden';document.body.appendChild(a);if('loading'!==document.readyState)c();else if(window.addEventListener)document.addEventListener('DOMContentLoaded',c);else{var e=document.onreadystatechange||function(){};document.onreadystatechange=function(b){e(b);'loading'!==document.readyState&&(document.onreadystatechange=e,c())}}}})();</script></body>
</html>
